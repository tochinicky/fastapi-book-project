{
    "name": "fastapi-nginx-group",
    "properties": {
      "containers": [
        {
          "name": "fastapi-container",
          "properties": {
            "image": "${{ secrets.ACR_NAME }}.azurecr.io/fastapi-app:latest",
            "resources": {
              "requests": {
                "cpu": 1,
                "memoryInGB": 1.5
              }
            },
            "ports": [{ "protocol": "TCP", "port": 8000 }]
          }
        },
        {
          "name": "nginx-container",
          "properties": {
            "image": "${{ secrets.ACR_NAME }}.azurecr.io/nginx-proxy:latest",
            "resources": {
              "requests": {
                "cpu": 0.5,
                "memoryInGB": 1
              }
            },
            "ports": [{ "protocol": "TCP", "port": 80 }]
          }
        }
      ],
      "osType": "Linux",
      "ipAddress": {
        "type": "Public",
        "dnsNameLabel": "fastapi-nginx",
        "ports": [
          { "protocol": "TCP", "port": 80 },
          { "protocol": "TCP", "port": 8000 }
        ]
      },
      "imageRegistryCredentials": [
        {
          "server": "${{ secrets.ACR_NAME }}.azurecr.io",
          "username": "${{ secrets.ACR_USERNAME }}",
          "password": "${{ secrets.ACR_PASSWORD }}"
        }
      ],
      "restartPolicy": "Always"
    }
  }